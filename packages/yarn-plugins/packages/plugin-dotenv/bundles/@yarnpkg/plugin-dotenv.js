/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-dotenv",
factory: function (require) {
"use strict";var plugin=(()=>{var Y=Object.create;var h=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var l=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var v=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),H=(e,r)=>{for(var t in r)h(e,t,{get:r[t],enumerable:!0})},w=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of C(r))!B.call(e,s)&&s!==t&&h(e,s,{get:()=>r[s],enumerable:!(n=F(r,s))||n.enumerable});return e};var N=(e,r,t)=>(t=e!=null?Y(P(e)):{},w(r||!e||!e.__esModule?h(t,"default",{value:e,enumerable:!0}):t,e)),G=e=>w(h({},"__esModule",{value:!0}),e);var O=v((Oe,W)=>{W.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var k=v((Ve,u)=>{var V=l("fs"),y=l("path"),J=l("os"),Q=l("crypto"),z=O(),_=z.version,X=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Z(e){let r={},t=e.toString();t=t.replace(/\r\n?/mg,`
`);let n;for(;(n=X.exec(t))!=null;){let s=n[1],o=n[2]||"";o=o.trim();let a=o[0];o=o.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),a==='"'&&(o=o.replace(/\\n/g,`
`),o=o.replace(/\\r/g,"\r")),r[s]=o}return r}function ee(e){let r=T(e),t=i.configDotenv({path:r});if(!t.parsed)throw new Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);let n=j(e).split(","),s=n.length,o;for(let a=0;a<s;a++)try{let c=n[a].trim(),f=ne(t,c);o=i.decrypt(f.ciphertext,f.key);break}catch(c){if(a+1>=s)throw c}return i.parse(o)}function re(e){console.log(`[dotenv@${_}][INFO] ${e}`)}function te(e){console.log(`[dotenv@${_}][WARN] ${e}`)}function E(e){console.log(`[dotenv@${_}][DEBUG] ${e}`)}function j(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function ne(e,r){let t;try{t=new URL(r)}catch(c){throw c.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):c}let n=t.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let s=t.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let o=`DOTENV_VAULT_${s.toUpperCase()}`,a=e.parsed[o];if(!a)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);return{ciphertext:a,key:n}}function T(e){let r=y.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(r=e.path),r.endsWith(".vault")?r:`${r}.vault`}function oe(e){return e[0]==="~"?y.join(J.homedir(),e.slice(1)):e}function se(e){re("Loading env from encrypted .env.vault");let r=i._parseVault(e),t=process.env;return e&&e.processEnv!=null&&(t=e.processEnv),i.populate(t,r,e),{parsed:r}}function ae(e){let r=y.resolve(process.cwd(),".env"),t="utf8",n=Boolean(e&&e.debug);e&&(e.path!=null&&(r=oe(e.path)),e.encoding!=null&&(t=e.encoding));try{let s=i.parse(V.readFileSync(r,{encoding:t})),o=process.env;return e&&e.processEnv!=null&&(o=e.processEnv),i.populate(o,s,e),{parsed:s}}catch(s){return n&&E(`Failed to load ${r} ${s.message}`),{error:s}}}function ie(e){let r=T(e);return j(e).length===0?i.configDotenv(e):V.existsSync(r)?i._configVault(e):(te(`You set DOTENV_KEY but you are missing a .env.vault file at ${r}. Did you forget to build it?`),i.configDotenv(e))}function ce(e,r){let t=Buffer.from(r.slice(-64),"hex"),n=Buffer.from(e,"base64"),s=n.slice(0,12),o=n.slice(-16);n=n.slice(12,-16);try{let a=Q.createDecipheriv("aes-256-gcm",t,s);return a.setAuthTag(o),`${a.update(n)}${a.final()}`}catch(a){let c=a instanceof RangeError,f=a.message==="Invalid key length",g=a.message==="Unsupported state or unable to authenticate data";if(c||f){let d="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(d)}else if(g){let d="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(d)}else throw console.error("Error: ",a.code),console.error("Error: ",a.message),a}}function le(e,r,t={}){let n=Boolean(t&&t.debug),s=Boolean(t&&t.override);if(typeof r!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let o of Object.keys(r))Object.prototype.hasOwnProperty.call(e,o)?(s===!0&&(e[o]=r[o]),n&&E(s===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):e[o]=r[o]}var i={configDotenv:ae,_configVault:se,_parseVault:ee,config:ie,decrypt:ce,parse:Z,populate:le};u.exports.configDotenv=i.configDotenv;u.exports._configVault=i._configVault;u.exports._parseVault=i._parseVault;u.exports.config=i.config;u.exports.decrypt=i.decrypt;u.exports.parse=i.parse;u.exports.populate=i.populate;u.exports=i});var R=v((je,x)=>{"use strict";var I=l("os");function ue(){var e=process.env,r=e.HOME,t=e.LOGNAME||e.USER||e.LNAME||e.USERNAME;return process.platform==="win32"?e.USERPROFILE||e.HOMEDRIVE+e.HOMEPATH||r||null:process.platform==="darwin"?r||(t?"/Users/"+t:null):process.platform==="linux"?r||(process.getuid()===0?"/root":t?"/home/"+t:null):r||null}x.exports=typeof I.homedir=="function"?I.homedir:ue});var $=v((Te,A)=>{"use strict";A.exports=R()()});var K=v((ke,p)=>{"use strict";var S=l("fs"),D=l("path"),fe=$(),de=S.readFileSync,ve=S.statSync,m=D.join,pe=D.resolve,ge=".config",he="utf8",me=/^\./,L=D.sep;function Ee(e,r,t){r=m(e,r);var n=m(r,t),s=ve(n);return s&&{cwd:e,dir:r,path:n}}function ye(e,r,t){r=m(e,r);var n=m(r,t),s=l.resolve(n);return s&&{cwd:e,dir:r,path:s}}function b(e,r){var t=q(e,r);return t&&t.path}function q(e,r){if(!e)return null;r=r||{};var t,n=r.dir!==null&&r.dir!==void 0?r.dir:ge,s=r.dot?e:e.replace(me,""),o=r.module?ye:Ee,a=pe(r.cwd||".").split(L),c=a.length;function f(g){try{return o(g,"",e)}catch{}try{return o(g,n,s)}catch{}}for(;c--;){if(t=f(a.join(L)),t)return t;a.pop()}return(r.home||r.home===null||r.home===void 0)&&(t=f(fe),t)?t:null}function _e(e,r){if(!e)return null;r=r||{};var t=b(e,r);return t&&de(t,{encoding:r.encoding||he,flag:r.flag})}function De(e,r){if(!e)return null;r=r||{},r.module=!0;var t=b(e,r);return t&&l(t)}p.exports=b;p.exports.obj=q;p.exports.read=_e;p.exports.require=De});var we={};H(we,{hooks:()=>be});var M=N(k(),1),U=N(K(),1),be={async setupScriptEnvironment(e,r){var n;let t=(0,M.config)({path:(n=(0,U.default)(".env"))!=null?n:void 0});Object.assign(r,t.parsed)}};return G(we);})();
return plugin;
}
};
